{% extends '@Openl10nWeb/layout/base.html.twig' %}

{% block stylesheets %}
  {{ parent() }}

  {% stylesheets '@Openl10nEditorBundle/Resources/assets/css/editor.scss' %}
    <link rel="stylesheet" href="{{ asset_url }}" />
  {% endstylesheets %}
{% endblock stylesheets %}

{% block javascripts %}
  {{ parent() }}

  {% javascripts
    '@Openl10nEditorBundle/Resources/assets/js/vendor/underscore.js'
    '@Openl10nEditorBundle/Resources/assets/js/vendor/keymaster.js'
    '@Openl10nEditorBundle/Resources/assets/js/vendor/backbone.js'
    '@Openl10nEditorBundle/Resources/assets/js/vendor/backbone.marionette.js'
    '@Openl10nEditorBundle/Resources/assets/js/vendor/backbone.shortcuts.js'
    '@Openl10nEditorBundle/Resources/assets/js/bootstrap.js'
    '@Openl10nEditorBundle/Resources/assets/js/application.js'
    '@Openl10nEditorBundle/Resources/assets/js/models/context.js'
    '@Openl10nEditorBundle/Resources/assets/js/models/translation-item.js'
    '@Openl10nEditorBundle/Resources/assets/js/models/translation-list.js'
    '@Openl10nEditorBundle/Resources/assets/js/modules/translate.js'
    '@Openl10nEditorBundle/Resources/assets/js/views/app-layout.js'
    '@Openl10nEditorBundle/Resources/assets/js/views/actions-view.js'
    '@Openl10nEditorBundle/Resources/assets/js/views/filter-view.js'
    '@Openl10nEditorBundle/Resources/assets/js/views/header-view.js'
    '@Openl10nEditorBundle/Resources/assets/js/views/translation-item-view.js'
    '@Openl10nEditorBundle/Resources/assets/js/views/translation-list-view.js'
    '@Openl10nEditorBundle/Resources/assets/js/views/translation-edit-view.js'
    '@Openl10nEditorBundle/Resources/assets/js/lib/controller.js'
    '@Openl10nEditorBundle/Resources/assets/js/lib/router.js'
    '@Openl10nEditorBundle/Resources/assets/js/lib/shortcuts.js'
  %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
  {% endjavascripts %}

  <script type="text/javascript">
    $(function() {
      Editor.app.start({
        project: {
          id: "{{ project.slug }}",
          name: "{{ project.name }}",
          locale: "{{ project.defaultLocale }}"
        },
        languages: [{
          id: 'en',
          name: 'English (en)'
        },{
          id: 'fr',
          name: 'French (fr)'
        }],
        domains: [{
          id: 'barbaz',
          name: 'Barbaz'
        },{
          id: 'barbaz2',
          name: 'Barbaz2'
        }]
      });
    });
  </script>
{% endblock javascripts %}

{% block body %}
  <div class="ol-editor-layout" id="ol-editor-layout">
    <div class="ol-editor-header" id="ol-editor-header">
      <div class="ol-editor-branding">
        <a href="/">
          <i class="ol-editor-logo-icon fa fa-code"></i>
        </a>
      </div>

      <div class="ol-editor-header-inner">
        <div class="pull-left">
          <div class="ol-editor-header-title">
            <a href="#">
              {{ project.name }}
            </a>
          </div>
        </div>

        <div class="clearfix"></div>
      </div>
    </div> <!-- /.ol-editor-header -->

    <div class="ol-editor-content">
      <div class="ol-editor-sidebar">
        <div class="ol-editor-filter" id="ol-editor-filter">
          <div class="form-group">
            <input type="text" class="form-control" id="translationFilterInput" placeholder="Search…">
          </div>
        </div>

        <div class="ol-editor-translation-list fullheight" id="ol-editor-translation-list">
        </div>
      </div> <!-- /.ol-editor-sidebar -->

      <div class="ol-editor-main">
        <div class="ol-editor-mainbar">
          <div class="ol-editor-actionbar" id="ol-editor-actionbar">
          </div>
        </div>

        <div class="ol-editor-translation-edit" id="ol-editor-translation-edit">
        </div>
      </div> <!-- /.ol-editor-main -->
    </div> <!-- /.ol-editor-content -->
  </div>

  <script type="text/template" id="ol-editor-template-header">
    {{ include('@Openl10nEditor/Editor/js_templates/header.html.twig', {}, with_context = false) }}
  </script>

  <script type="text/template" id="ol-editor-translation-item-template">
    {{ include('@Openl10nEditor/Editor/js_templates/translation-item.html.twig', {}, with_context = false) }}
  </script>

  <script type="text/template" id="ol-editor-translation-edit-template">
    {{ include('@Openl10nEditor/Editor/js_templates/translation-edit.html.twig', {}, with_context = false) }}
  </script>

  <script type="text/template" id="ol-editor-actions-template">
    {{ include('@Openl10nEditor/Editor/js_templates/actions.html.twig', {}, with_context = false) }}
  </script>

  <script type="text/template" id="ol-editor-filter-template">
    {{ include('@Openl10nEditor/Editor/js_templates/filter.html.twig', {}, with_context = false) }}
  </script>


  {#<div id="appLayout">
    <div class="ol-header">
      <div class="container-fluid">
        <div class="row" id="header">
          <div class="col-md-5">
            <h2 class="title title-lg" id="title">
              <a href="{{ path('openl10n_project_show', {slug: project.slug}) }}">
                {{ project.name }}
              </a>
            </h2>
          </div>
        </div>
      </div>
    </div>

    <div class="ol-editor">
      <div class="ol-editor-sidebar">
        <form action="#" class="ol-editor-filter-form">
          <div class="form-group">
            <input type="text" class="form-control" id="translationFilterInput" placeholder="Search…">
          </div>
        </form>

        <div class="ol-editor-translation-list fullheight" id="translation-list">
          <ul id="translationList">
            <li>
              <div class="loader-item">
                <i class="fa fa-refresh fa-spin"></i>
              </div>
            </li>
          </ul>
        </div>
      </div>

      <div class="ol-editor-content">
        <div class="ol-editor-actionbar">
          <div class="pull-right" id="actions"></div>

          <div class="status">
            <button class="btn btn-sm btn-light">
              Tous <span class="badge">42</span>
            </button>
            <button class="btn btn-sm btn-light">
              Non Traduits
            </button>
            <button class="btn btn-sm btn-light">
              Non Relus
            </button>
          </div>
        </div>

        <div class="fullheight">
          <div id="translation-edit"></div>
        </div>
      </div>
    </div>
  </div>

  <script type="text/template" id="header-template">
    {{ include('@Openl10nEditor/Editor/js_templates/header.html.twig', {
      project: project,
      domains: domains,
      languages: languages
    }, with_context = false) }}
  </script>

  <script type="text/template" id="translation-item-template">
    {{ include('@Openl10nEditor/Editor/js_templates/translation-item.html.twig', {}, with_context = false) }}
  </script>

  <script type="text/template" id="translation-edit-template">
    {{ include('@Openl10nEditor/Editor/js_templates/translation-edit.html.twig', {}, with_context = false) }}
  </script>

  <script type="text/template" id="actions-template">
    {{ include('@Openl10nEditor/Editor/js_templates/actions.html.twig', {}, with_context = false) }}
  </script>
  #}
{% endblock %}
